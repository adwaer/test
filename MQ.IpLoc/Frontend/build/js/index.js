angular.module("locations",["requests","ui.bootstrap"]).config(["$routeProvider",function(o){o.when("/locatiobyip/",{templateUrl:"/location_by_ip.html",reloadOnSearch:!1}).when("/locatiosbycity/",{templateUrl:"/locations_by_city.html",reloadOnSearch:!1})}]).controller("LocationByIpCtrl",["$scope","resourceFactory",function(o,n){function t(){n.getFor("ip/location/:id",{id:"@id"}).then(function(n){o.LocationApi=n})}o.searchPattern="",o.currentLocation=void 0,o.isLoading=!1,o.search=function(){o.currentLocation=void 0,o.isLoading=!0,o.Error=0,o.LocationApi.get({id:o.searchPattern}).$promise.then(function(n){o.currentLocation=n})["catch"](function(){o.Error="Произошла ошибка, возможно вы ввели некорректные данные"})["finally"](function(){o.isLoading=!1})},t()}]).controller("LocationsByCityCtrl",["$scope","resourceFactory","$uibModal",function(o,n,t){function e(){n.getFor("city/locations/:id",{id:"@id"}).then(function(n){o.LocationApi=n})}o.searchPattern="",o.currentLocation=void 0,o.isLoading=!1,o.search=function(){o.rows=[],o.isLoading=!0,o.Error=0,o.LocationApi.query({id:o.searchPattern}).$promise.then(function(n){o.rows=n})["catch"](function(){o.Error="Произошла ошибка, возможно вы ввели некорректные данные"})["finally"](function(){o.isLoading=!1})},o.showInMap=function(n){o.modalInstance=t.open({animation:!0,templateUrl:"map.html",controller:"ModalCtrl",size:500,resolve:{location:function(){return n}}})},e()}]).controller("ModalCtrl",["$scope","$uibModalInstance","location",function(o,n,t){o.currentLocation=t,o.closeModal=function(){n.dismiss("cancel")}}]),angular.module("requests",[]).factory("resourceFactory",["$resource",function(o){var n=void 0;return{serviceHost:function(){return n?n:n=o("settings.json").get(function(o){return o.host})},getFor:function(n){return this.serviceHost().$promise.then(function(t){return o(t.host+n)})}}}]);var app=angular.module("app",["ngResource","ngRoute","ui.bootstrap","requests","locations","ngGoogleMap"]).controller("DefaultCtrl",["$scope",function(o){o.Header="Панел управления"}]).controller("SidebarCtrl",["$scope",function(o){o.isActive=function(o){return location.hash==o}}]).config(["$routeProvider",function(o){o.when("/index",{templateUrl:"default.html"}).otherwise({redirectTo:"/index"})}]);angular.element(document).ready(function(){angular.bootstrap(document,["app"])}),angular.module("ngGoogleMap",[]).directive("ngGoogleMap",["$parse",function(o){function n(o,n){if(!o)return o;var e={lat:o.Lat,lng:o.Lon};return t&&t.setMap(null),t=new google.maps.Marker({position:e,map:n,title:"Hello World!"}),google.maps.event.trigger(n,"resize"),n.setCenter(e),o}var t;return{link:function(o,t,e,r){var i=new google.maps.Map(t[0],{center:{lat:55.763585,lng:37.560883},zoom:7});r.$formatters.push(function(o){return n(o,i)})},scope:!0,restrict:"AE",require:"ngModel"}}]);